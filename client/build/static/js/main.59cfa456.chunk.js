(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);n(36);var a,r=n(0),c=n.n(r),s=n(19),i=n.n(s),o=(n(41),n(33)),u=n(3),l=n.n(u),d=n(5),j=n(9),b=n.n(j),p="https://raysecur-001.auth.us-east-2.amazoncognito.com",m="66mn9kmr2p06hrl4bombr1r294",f="http://18.188.12.132",O="https://mgtxx7581l.execute-api.us-east-2.amazonaws.com/prod";!function(e){e.SAVE="API/TOKEN/SAVE"}(a||(a={}));var h={id_token:""};var v,x=function(){var e=window.location.href.split("?")[0];window.history.pushState("object",document.title,e)};function g(){var e=localStorage.getItem("raysecurToken");return e?{headers:{Authorization:JSON.parse(e)}}:{}}function _(){return"".concat(p,"/login?client_id=").concat(m,"&response_type=code&scope=email+openid&redirect_uri=").concat(f)}!function(e){e.GET="API/IMAGES/GET"}(v||(v={}));var w=[];function y(){return function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(O,"/images"),g());case 3:n=e.sent,t({type:v.GET,payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),window.open(_(),"_self");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var N=n(16),k=Object(N.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;return t.type===a.SAVE?(localStorage.setItem("raysecurToken",JSON.stringify(t.payload.id_token)),t.payload):e},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;return t.type===v.GET?t.payload:e}});var E=n(7),S=(n(60),n(61),n(13)),T=n(14),A=n(1);var I=function(){return Object(A.jsxs)("div",{className:"top-bar",children:[Object(A.jsx)("div",{className:"top-bar__info",children:"RAYSECUR"}),Object(A.jsx)("div",{className:"top-bar__buttons",children:Object(A.jsx)(S.a,{icon:T.c,className:"top-bar__buttons__logout",onClick:function(){localStorage.removeItem("raysecurToken"),window.open("".concat(p,"/logout?client_id=").concat(m,"&logout_uri=").concat(_()),"_self")}})})]})},C=n(11),z=n(8),P=(n(67),n(10)),G=n.n(P),J=n(6),R={title:"",description:"",image:null},U={title:!1,description:!1,image:!1};var V=function(){var e=Object(J.b)(),t=Object(r.useState)(R),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(E.a)(s,2),o=i[0],u=i[1],j=Object(r.useState)(U),p=Object(E.a)(j,2),m=p[0],f=p[1],h=function(e){var t=e.target,n=t.files?t.files[0]:t.value,r=null===n||""===n||void 0===n;f(Object(z.a)(Object(z.a)({},m),{},Object(C.a)({},t.name,r))),c(Object(z.a)(Object(z.a)({},a),{},Object(C.a)({},t.name,n)))},v=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(O,"/upload"),g());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put(t,a.image);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(z.a)(Object(z.a)({},a),{},{image:t}),e.next=3,b.a.post("".concat(O,"/images"),n,g());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){for(var e=0,t=Object.entries(a);e<t.length;e++){var n=t[e];if(null===n[1]||""===n[1]||void 0===n[1])return f(Object(z.a)(Object(z.a)({},m),{},Object(C.a)({},n[0],!0))),!1}return!0},N=function(){var t=Object(d.a)(l.a.mark((function t(){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w()){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.next=5,v();case 5:return n=t.sent,a=n.data.Key.split("/")[1],r=n.data.uploadURL,t.next=10,x(r);case 10:return t.next=12,_(a);case 12:return t.next=14,e(y());case 14:u(!1);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"image-form",children:[Object(A.jsxs)("div",{className:"form-group ".concat(m.title?"showError":"hideError"),children:[Object(A.jsx)("label",{children:"Title"}),Object(A.jsx)("input",{type:"text",className:"form-control",name:"title",onChange:h,required:!0}),Object(A.jsx)("div",{className:"message-error-feedback",children:"Please provide a Title"})]}),Object(A.jsxs)("div",{className:"form-group ".concat(m.description?"showError":"hideError"),children:[Object(A.jsx)("label",{children:"Description"}),Object(A.jsx)("textarea",{className:"form-control",rows:3,name:"description",onChange:h}),Object(A.jsx)("div",{className:"message-error-feedback",children:"Please provide a Description"})]}),Object(A.jsxs)("div",{className:"form-group ".concat(m.image?"showError":"hideError"),children:[Object(A.jsx)("label",{children:"Image"}),Object(A.jsxs)("div",{children:[Object(A.jsx)("input",{type:"file",onChange:h,name:"image"}),Object(A.jsx)("div",{className:"message-error-feedback",children:"Please provide a Image"})]})]}),Object(A.jsx)("div",{className:"form-group image-form__upload-button",children:o?Object(A.jsx)("div",{children:Object(A.jsx)(G.a,{type:"Oval",color:"#666666",height:25,width:25})}):Object(A.jsx)("button",{type:"button",className:"btn btn-primary",onClick:N,children:"Upload"})})]})},D=n(35),K=(n(89),[]);var L=function(){var e=Object(J.c)((function(e){return e.images})),t=Object(r.useState)(K),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(E.a)(s,2),o=i[0],u=i[1],j=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,b(y());case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(J.b)();Object(r.useEffect)((function(){j()}),[b]);var p=e.map((function(e,t){return Object(A.jsxs)("div",{className:"images__item",children:[Object(A.jsxs)("div",{className:"images__item__title",onClick:function(){return function(e){console.log(e);var t=Object(D.a)(a);t[e]=!t[e],c(t)}(t)},children:[Object(A.jsx)("div",{children:e.title}),Object(A.jsx)("div",{className:"images__item__title__buttons",children:a[t]?Object(A.jsx)(S.a,{icon:T.b,size:"2x"}):Object(A.jsx)(S.a,{icon:T.a,size:"2x"})})]}),a[t]?Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"images__item__description",children:e.description}),Object(A.jsx)("div",{className:"images__item__image",children:Object(A.jsx)("img",{src:e.image,alt:""})})]}):null]},t)}));return p.reverse(),Object(A.jsxs)("div",{className:"images",children:[p,o?Object(A.jsx)("div",{className:"images__loading",children:Object(A.jsx)(G.a,{type:"Oval",color:"#666666",height:100,width:100})}):null]})};var M=function(){var e=Object(J.b)(),t=Object(r.useState)(!0),n=Object(E.a)(t,2),c=n[0],s=n[1],i=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,e(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(n=new URLSearchParams(window.location.search)).get("code")){e.next=4;break}throw"code not found";case 4:return x(),n.append("client_id",m),n.append("redirect_uri",f),n.append("grant_type","authorization_code"),e.next=10,b.a.post("".concat(p,"/oauth2/token"),n);case 10:r=e.sent,t({type:a.SAVE,payload:r.data}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}());case 3:s(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[e]),Object(A.jsx)("div",{className:"dashboard",children:c?Object(A.jsx)("div",{className:"dashboard__loading",children:Object(A.jsx)(G.a,{type:"Oval",color:"#666666",height:100,width:100})}):Object(A.jsxs)("div",{children:[Object(A.jsx)(I,{}),Object(A.jsxs)("div",{className:"dashboard__body",children:[Object(A.jsx)(V,{}),Object(A.jsx)(L,{})]})]})})};var q=function(){var e=Object(N.d)(k,Object(N.c)(Object(N.a)(o.a)));return Object(A.jsx)(J.a,{store:e,children:Object(A.jsx)(M,{})})};i.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(q,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.59cfa456.chunk.js.map